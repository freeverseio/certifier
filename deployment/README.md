## Deploying in K8S

1.- Create CircleCI project and Github Repo.

2.- Create config.yml with your desired jobs configuration.

3.- Create cicd appropriate service accounts in the namespace that you wish to deploy your application to, and write down the cicd-token secret generated by k8s itself.

4.- Execute create_cicd_config which will yield the value to add KUBECONFIG_DATA as an env var for the CircleCI Project.

5.- Add KUBECONFIG_DATA as base64 encoded as an environment variable to CircleCI Project.

6.- Add docker-secret.yml to this new namespace so the images can be pulled from dockerhub [https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/].


```
kind: Secret
apiVersion: v1
metadata:
  name: docker-secret
  namespace: certifier
data:
  .dockerconfigjson: >-
    eyJhdXRocyI6eyJkb2NrZXIuaW8iOnsidXNlcm5hbWUiOiJmcmVldmVyc2Vpb2RldiIsInBhc3N3b3JkIjoiTVd4NC9DZ0M1LzNoWSsvOHNJTnFKcE1TdmFsYkcxeHdVYmVaQnBQVTBxYz0iLCJlbWFpbCI6ImFzaW5pc2NhbGNoaUB1pYWTZUVmQ0TkM5RFowTTFMek5vV1Nzdk9ITkpUbkZLY0UxVGRtRnNZa2N4ZUhkVlltVmFRbkJRVlRCeFl6MD0ifX19
type: kubernetes.io/dockerconfigjson

```

7.- You are ready to connect from CircleCI to your cluster and perform any kubectl operation.
